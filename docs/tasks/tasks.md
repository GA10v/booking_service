## Сервис бронирования билетов

## Я.Практика

Не всем нравится сидеть дома и смотреть фильмы в одиночку: иногда хочется их посмотреть с компанией единомышленников.
Для добавления такой возможности реализуйте кнопку покупки билета в кино для определенной группы фильмов. Система должна дать пользователю возможность составлять свои расписания, выбирать фильмы и место сбора. Также она должна показывать возможное количество зрителей и позволять пользователю выбирать дату и время просмотра и хоста — того, кто предлагает фильм и место.
Для данной задачи реализовывать оплату не нужно: достаточно бронировать билеты и не давать забронировать их больше, чем есть мест у конкретного человека.
В качестве задания «со звёздочкой» придумайте систему оценки пользователя-хоста и пользователя-гостя.

## Легенда

У пользователя есть желание посмотреть фильм/сериал
На странице фильма есть кнопка ~"Зпланировать событие"

### 1. Сценарий "Пользователь решил учавствовать в чужом событии"
- использует фильтр (по приватности(открытая или только у друзей), по локации, по времени, по типу(платное или нет), по рейтингу(*))
- переходит на событие, отправляет заявку, ждет уведомление от организатора (одобрено или нет)
- получакет уведомление от организатора и ссылку на событие (инвайт)
- (*) может стать модератором и пригласить своих друзей или учавствовать в подтверждении заявки
- (*) может стать модератором и учавствовать в подтверждении заявок
- (*) может посмотреть профиль пользователя и историю событий с отзывами
- (*) может сам написать отзыв о событии и поставить оценку
- (*) может общаться в чате с учасниками
- (*) может опубликовать пост о событии в VK, Telegram

Если организатор изменит событие - все участники события получают уведомление и короткую ссылку на событие
За день до события всем учасникам приходит уведомление о событии и короткая ссылка на событие
В день события (за час) приходит уведомление о событии и короткая ссылка на событие


### 2. Сценарий "Пользователь сам создает событие:"
- назначает время просмотра
- место просмотра
- указывает приватность события (для всех или только для подписчиков)
- максимальное число участников (модерация пользователем)
- может приглавсить конкретного подписчика (+ система подтверждения участия в событии)
- указывает тип события (платное/бесплантое)
- указать стоимость события (если это поход в кинотеатр)
- краткое описание
- возможность измениять событие
- возможность отменять событие
- до проведения события получает запрсы на приглашения и выбирает кому отправить приглашения
- (*) добавляет модератора из числа подписчиков и дает им права на приглашение и утверждение гостей [испотлзавать флаг is_super]
- (*) может общаться в чате с учасниками
- (*) может опубликовать пост о событии в VK, Telegram

Если пользователь изменит событие - все участники события получают уведомление и короткую ссылку на событие
Если кто-то решил принять участие в событии - организатору приходит уведомление с запросом на инвайт
Если гость отреагировал на событие (принял/оказал) - организатору приходит уведомление
За день до события всем учасникам приходит уведомление о событии и короткая ссылка на событие
В день события (за час) приходит уведомление о событии и короткая ссылка на событие

## Требования

### Сервисы
- Auth (user_info, access_token)
- Movie_API (информация о фильме)
- UGC (подписчики, !!хранение отзывов!!) - !ВОПРОС!
- Notification (отправлять уведомления, создавать и модерировать отложенные уведомления)
- Url_shortner (генерировать ссылки на события)

### User
- `[booking ]` создать как организатор
- `[booking ]` создать как участник
- `[booking ]` изменить (подтвердить/отклонить)
- `[booking ]` посмотреть информацию (статус свой, чужой)
-
- `[booking ]` `[ * moderator]` дать права на свое событие
-
- `[свой announcement]` создать
- `[свой announcement]` изменить
- `[свой announcement]` удалить
- `[свой announcement]` получить все (по условию)(пагинация)
-
- `[чужой announcement]` получитьвсе все (по условию)(пагинация)
- `[чужой announcement]` получить один с подробной информацией
-
- `[чужой announcement]` `[ * rating]` поставить оценку
- `[чужой announcement]` `[ * rating]` изменить оценку
- `[чужой announcement]` `[ * rating]` написать отзыв
- `[чужой announcement]` `[ * rating]` изменить отзыв
- `[чужой announcement]` `[ * rating]` удалить отзыв
- `[чужой announcement]` `[ * rating]` получить чужой отзыв
-
- `[чужой announcement]` `[ * chat]` написать пост
- `[чужой announcement]` `[ * chat]` изменить пост
- `[чужой announcement]` `[ * chat]` удалить пост
- `[чужой announcement]` `[ * chat]` получить чужие посты
-
- `[чужой announcement]` `[ * moderator]` отправить инавйт
- `[чужой announcement]` `[ * moderator]` подтвердить заявку (от учасника)
- `[чужой announcement]` `[ * moderator]` отменить заявку (от учасника)

!!!
- запретить создавать дубликаты своих же событий
- запретить отправлять несколько заявок на одно событие
- проверять конфликты событий "своих-чужих" (уже создал свое или подтвердил чужое на это время)
- (*) возможность автоматически добавлять пользователя, если очень хочется (инвайт - увеличивает максимальное кол-во участников)
!!!

### Event

...


## Модели

...

## задачи на [22.03.2023 ]

backward
- [Notific] Fix (или писать мок)
- [Notific] Тянуть в проект или docker (если кто-то из нас умеет)
- [Notific] Добавить функционал Event.booking (не в приоритете)
doc
- [DOC] Требования к Announcement
- [DOC] Требования к Event
- [DOC] Требования к Booking
- [DOC] Требования к Rewievs
- [DOC] Требования к сервисам из прошлых спринтов
- [DOC] Модели
- [DOC] Диаграма последовательностей
api
- [MVP] FastAPI показать /api/openapi (Announcement)
- [MVP+] FastAPI middleware Logging
- [MVP+] FastAPI middleware Auth
- [MVP+] FastAPI docker
- [MVP+] FastAPI test
db
- [MVP] PG написать StorageProtocol(async)
- [MVP+] PG написать PGStorage(async)
- [MVP+] PG написать инициализацию BD(sqlalchemy)
- [MVP+] PG написать модель Announcement(sqlalchemy)
- [MVP+] PG написать модель Announcement(pydantic)
- [MVP+] PG docker
reviews
- [Rewievs] Прочитать спринт UGC
- [Rewievs] Написать требования к сервису
- [Rewievs] Выбрать технологию (Mongo/PG)
- [Rewievs] Модели
- [Rewievs] Требования к стороним сервисам
- [Rewievs] [MVP] DB написать StorageProtocol(async)
- [Rewievs] [MVP] DB написать DBStorage(async)